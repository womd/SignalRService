

  
    <script>
        var servicehub;
        $(function () {
            servicehub = $.connection.serviceHub;
            servicehub.client.hello = function () {
                // Add the message to the page.
                $('body').append('<strong>HELLO</strong>');
            };

            //general purpose callback method
            servicehub.client.clientCallback = function (data) {
                var fn = getFunctionFromString(data.Method);
                if (typeof fn === 'function') {
                    fn(data.Parameters);
                }
            }

            servicehub.client.someoneAddedItemToCart = function (itemid) {
                //find item and highlight it
                $('*[data-itemid=' +itemid + ']').addClass("highlight");
                setTimeout(function () {
                    $('*[data-itemid=' +itemid + ']').removeClass("highlight");
                }, 500);
            }

            servicehub.client.minerstatsUpdate = function (connectionId, data) {
                //find item in jtable and update
             
            }

            servicehub.client.miner_reportStatus = function () {
                //send stats to server
                miner.reportStatus();
            }

            servicehub.client.miner_setThrottle = function(data) {
                miner.client().setThrottle(data);
            }

            // Start the connection.
            $.connection.hub.start().done(function () {
                console.log("connection start done....");
            });

        });

        //to avoid use of eval
        // Get function from string, with or without scopes (by Nicolas Gauthier)
        window.getFunctionFromString = function (string) {
            var scope = window;
            var scopeSplit = string.split('.');
            for (i = 0; i < scopeSplit.length - 1; i++) {
                scope = scope[scopeSplit[i]];

                if (scope == undefined) return;
            }
            return scope[scopeSplit[scopeSplit.length - 1]];
        }

        function testmethod(params) {
            $('body').append('<strong>called: testmethod</strong>');
            $(params).each(function (idx) {
                $('body').append('<strong>' + params.param1 + " | " + params.param2 + '</strong>');
            });
            $('body').append('<strong>-----</strong>');
        }

    </script>

